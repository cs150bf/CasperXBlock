function twiddle_stage_2_init_xblock(a_re, a_im, b_re, b_im, sync, ...
    a_re_out, a_im_out, bw_re_out, bw_im_out, sync_out, ...
    FFTSize, input_bit_width, mux_latency, bram_latency, conv_latency)
%% diagram

% block: twiddles_collections/twiddle_stage_2/convert
negate_out1 = xSignal;
convert_out1 = xSignal;
delay7_out1 = xSignal;
counter_out1 = xSignal;
convert = xBlock(struct('source', 'Convert', 'name', 'convert'), ...
                        struct('n_bits', input_bit_width, ...
                               'bin_pt', input_bit_width - 1, ...
                               'overflow', 'Saturate', ...
                               'latency', conv_latency, ...
                               'pipeline', 'on'), ...
                        {negate_out1}, ...
                        {convert_out1});

% block: twiddles_collections/twiddle_stage_2/counter
counter = xBlock(struct('source', 'Counter', 'name', 'counter'), ...
                        struct('n_bits', FFTSize - 1 , ...
                               'rst', 'on', ...
                               'use_behavioral_HDL', 'on'), ...
                        {delay7_out1}, ...
                        {counter_out1});

% block: twiddles_collections/twiddle_stage_2/delay0
delay0 = xBlock(struct('source', 'Delay', 'name', 'delay0'), ...
                       struct('latency', bram_latency+mux_latency, ...
                              'reg_retiming', 'on'), ...
                       {c_to_ri_out1}, ...
                       {a_re});

% block: twiddles_collections/twiddle_stage_2/delay1
delay1 = xBlock(struct('source', 'Delay', 'name', 'delay1'), ...
                       struct('latency', bram_latency+mux_latency, ...
                              'reg_retiming', 'on'), ...
                       {c_to_ri_out2}, ...
                       {a_im});

% block: twiddles_collections/twiddle_stage_2/delay2
slice_out1 = xSignal;
delay2_out1 = xSignal;
delay2 = xBlock(struct('source', 'Delay', 'name', 'delay2'), ...
                       struct('latency', mux_latency-1, ...
                              'reg_retiming', 'on'), ...
                       {slice_out1}, ...
                       {delay2_out1});

% block: twiddles_collections/twiddle_stage_2/delay3
delay6_out1 = xSignal;
delay3_out1 = xSignal;
delay3 = xBlock(struct('source', 'Delay', 'name', 'delay3'), ...
                       struct('latency', mux_latency-1, ...
                              'reg_retiming', 'on'), ...
                       {delay6_out1}, ...
                       {delay3_out1});

% block: twiddles_collections/twiddle_stage_2/delay4
delay4_out1 = xSignal;
delay4 = xBlock(struct('source', 'Delay', 'name', 'delay4'), ...
                       struct('latency', mux_latency-conv_latency-1, ...
                              'reg_retiming', 'on'), ...
                       {convert_out1}, ...
                       {delay4_out1});

% block: twiddles_collections/twiddle_stage_2/delay5
delay5_out1 = xSignal;
delay5 = xBlock(struct('source', 'Delay', 'name', 'delay5'), ...
                       struct('latency', bram_latency, ...
                              'reg_retiming', 'on'), ...
                       {c_to_ri1_out1}, ...
                       {delay5_out1});

% block: twiddles_collections/twiddle_stage_2/delay6
delay6 = xBlock(struct('source', 'Delay', 'name', 'delay6'), ...
                       struct('latency', bram_latency, ...
                              'reg_retiming', 'on'), ...
                       {c_to_ri1_out2}, ...
                       {delay6_out1});

% block: twiddles_collections/twiddle_stage_2/delay7
delay7 = xBlock(struct('source', 'Delay', 'name', 'delay7'), ...
                       struct('latency', bram_latency, ...
                              'reg_retiming', 'on'), ...
                       {sync}, ...
                       {delay7_out1});

% block: twiddles_collections/twiddle_stage_2/delay8
delay8 = xBlock(struct('source', 'Delay', 'name', 'delay8'), ...
                       struct('latency', mux_latency, ...
                              'reg_retiming', 'on'), ...
                       {delay7_out1}, ...
                       {sync_out});

% block: twiddles_collections/twiddle_stage_2/mux0
mux0 = xBlock(struct('source', 'Mux', 'name', 'mux0'), ...
                     struct('latency', mux_latency), ...
                     {slice_out1, delay5_out1, delay6_out1}, ...
                     {bw_re});

% block: twiddles_collections/twiddle_stage_2/mux1
mux1 = xBlock(struct('source', 'Mux', 'name', 'mux1'), ...
                     struct('latency', 1), ...
                     {delay2_out1, delay3_out1, delay4_out1}, ...
                     {bw_im});

% block: twiddles_collections/twiddle_stage_2/negate
negate = xBlock(struct('source', 'Negate', 'name', 'negate'), ...
                       struct('n_bits', input_bit_width, ...
                              'bin_pt', input_bit_width-1, ...
                              'overflow', 'Saturate', ...
                              'latency', 1), ...
                       {c_to_ri1_out1}, ...
                       {negate_out1});

% block: twiddles_collections/twiddle_stage_2/slice
slice = xBlock(struct('source', 'Slice', 'name', 'slice'), ...
                      [], ...
                      {counter_out1}, ...
                      {slice_out1});



end

